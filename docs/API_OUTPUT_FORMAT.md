# APIè¾“å‡ºæ ¼å¼è¯´æ˜

## ğŸ“‹ å›ç­”æ‚¨çš„é—®é¢˜

### 1. APIè¾“å‡ºä¸€å®šæ˜¯Excelä¸å¯ä»¥æ˜¯JSONå—ï¼Ÿ

**ç­”æ¡ˆï¼šä¸æ˜¯çš„ï¼APIè¾“å‡ºå¯ä»¥æ˜¯JSONæ ¼å¼ã€‚**

å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„è½¬æ¢è„šæœ¬**åŒæ—¶ä¿å­˜äº†ä¸¤ç§æ ¼å¼**ï¼š
- âœ… **JSONæ ¼å¼** (`.json`) - ç”¨äºç¨‹åºè¯»å–å’Œå¤„ç†
- âœ… **Excelæ ¼å¼** (`.xlsx`) - ç”¨äºäººå·¥æŸ¥çœ‹å’ŒéªŒè¯

ä¸¤ç§æ ¼å¼éƒ½æ˜¯å¯é€‰çš„ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä½¿ç”¨å“ªç§æ ¼å¼ã€‚

---

### 2. APIè¾“å‡ºçš„JSONæ–‡ä»¶é‡Œæ˜¯å¦åŒ…å«frequency/volume/densityä¸‰ä¸ªæ•°ç»„ï¼ˆé•¿åº¦3000ï¼‰ï¼Ÿ

**ç­”æ¡ˆï¼šæ˜¯çš„ï¼å®Œå…¨ç¬¦åˆè¦æ±‚ã€‚**

JSONæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š

```json
{
  "frequency": [20.02, 20.07, 20.12, ..., 19977.0],  // é•¿åº¦: 3000
  "volume": [0.0, 0.0, 0.0, ..., 9358.47],            // é•¿åº¦: 3000
  "density": [0.0, 0.0, 0.0, ..., 34.18]              // é•¿åº¦: 3000
}
```

---

## ğŸ“Š JSONæ–‡ä»¶è¯¦ç»†ç»“æ„

### æ–‡ä»¶æ ¼å¼

**æ–‡ä»¶å**: `{æ ·æœ¬å}.json`  
**ç¼–ç **: UTF-8  
**æ ¼å¼**: æ ‡å‡†JSON

### æ•°æ®ç»“æ„

```json
{
  "frequency": [æµ®ç‚¹æ•°æ•°ç»„],  // é¢‘ç‡å€¼ (Hz)ï¼Œé•¿åº¦3000
  "volume": [æµ®ç‚¹æ•°æ•°ç»„],      // èƒ½é‡å€¼ï¼Œé•¿åº¦3000
  "density": [æµ®ç‚¹æ•°æ•°ç»„]     // å¯†åº¦å€¼ï¼Œé•¿åº¦3000
}
```

### æ•°æ®èŒƒå›´

- **frequency**: 20.0 - 19977.0 Hz
- **volume**: 0.0 - çº¦10000ï¼ˆæ ¹æ®æ ·æœ¬ä¸åŒï¼‰
- **density**: 0.0 - çº¦50ï¼ˆæ ¹æ®æ ·æœ¬ä¸åŒï¼‰
- **æ•°ç»„é•¿åº¦**: æ¯ä¸ªæ•°ç»„éƒ½æ˜¯ **3000ä¸ªå…ƒç´ **

---

## ğŸ” å®é™…éªŒè¯

### æ£€æŸ¥ç»“æœ

ä»æµ‹è¯•è½¬æ¢çš„3ä¸ªæ ·æœ¬éªŒè¯ï¼š

| æ ·æœ¬ | frequencyé•¿åº¦ | volumeé•¿åº¦ | densityé•¿åº¦ |
|------|--------------|-----------|-------------|
| XJTU-SY_1000_146413 | 3000 | 3000 | 3000 |
| XJTU-SY_1000_146414 | 3000 | 3000 | 3000 |
| XJTU-SY_1000_146415 | 3000 | 3000 | 3000 |

### ç¤ºä¾‹æ•°æ®

**XJTU-SY_1000_146413.json**:
```json
{
  "frequency": [20.023, 20.069, 20.115, ..., 19977.0],
  "volume": [0.0, 0.0, 0.0, ..., 9358.47],
  "density": [0.0, 0.0, 0.0, ..., 34.18]
}
```

---

## ğŸ’» ä»£ç ç¤ºä¾‹

### è¯»å–JSONæ–‡ä»¶

```python
import json
import numpy as np

# è¯»å–JSONæ–‡ä»¶
with open('XJTU-SY_1000_146413.json', 'r', encoding='utf-8') as f:
    data = json.load(f)

# è½¬æ¢ä¸ºnumpyæ•°ç»„
frequency = np.array(data['frequency'])  # å½¢çŠ¶: (3000,)
volume = np.array(data['volume'])        # å½¢çŠ¶: (3000,)
density = np.array(data['density'])      # å½¢çŠ¶: (3000,)

# éªŒè¯é•¿åº¦
print(f"frequencyé•¿åº¦: {len(frequency)}")  # 3000
print(f"volumeé•¿åº¦: {len(volume)}")        # 3000
print(f"densityé•¿åº¦: {len(density)}")      # 3000
```

### ä¿å­˜JSONæ–‡ä»¶ï¼ˆå½“å‰å®ç°ï¼‰

```python
import json
import numpy as np

# å‡è®¾dataæ˜¯ä»APIè§£æå¾—åˆ°çš„å­—å…¸
data = {
    'frequency': np.array([...]),  # numpyæ•°ç»„
    'volume': np.array([...]),     # numpyæ•°ç»„
    'density': np.array([...])    # numpyæ•°ç»„
}

# ä¿å­˜ä¸ºJSONï¼ˆè½¬æ¢ä¸ºåˆ—è¡¨ï¼‰
with open('output.json', 'w', encoding='utf-8') as f:
    json.dump({
        'frequency': data['frequency'].tolist(),  # è½¬ä¸ºåˆ—è¡¨
        'volume': data['volume'].tolist(),        # è½¬ä¸ºåˆ—è¡¨
        'density': data['density'].tolist()      # è½¬ä¸ºåˆ—è¡¨
    }, f, indent=2, ensure_ascii=False)
```

---

## ğŸ“ è¾“å‡ºæ–‡ä»¶ä½ç½®

è½¬æ¢åçš„æ–‡ä»¶ä¿å­˜åœ¨ï¼š
```
tools/sound_api/sound_api_output_test/
â”œâ”€â”€ XJTU-SY_1000_146413.json  â† JSONæ ¼å¼
â”œâ”€â”€ XJTU-SY_1000_146413.xlsx  â† Excelæ ¼å¼
â”œâ”€â”€ XJTU-SY_1000_146414.json
â”œâ”€â”€ XJTU-SY_1000_146414.xlsx
â””â”€â”€ ...
```

---

## âœ… æ€»ç»“

1. **APIè¾“å‡ºæ ¼å¼**ï¼š
   - âœ… æ”¯æŒJSONæ ¼å¼ï¼ˆæ¨èç”¨äºç¨‹åºå¤„ç†ï¼‰
   - âœ… æ”¯æŒExcelæ ¼å¼ï¼ˆæ¨èç”¨äºäººå·¥æŸ¥çœ‹ï¼‰
   - âœ… ä¸¤ç§æ ¼å¼åŒæ—¶ä¿å­˜

2. **JSONæ–‡ä»¶ç»“æ„**ï¼š
   - âœ… åŒ…å« `frequency` æ•°ç»„ï¼ˆé•¿åº¦3000ï¼‰
   - âœ… åŒ…å« `volume` æ•°ç»„ï¼ˆé•¿åº¦3000ï¼‰
   - âœ… åŒ…å« `density` æ•°ç»„ï¼ˆé•¿åº¦3000ï¼‰
   - âœ… æ‰€æœ‰æ•°ç»„éƒ½æ˜¯æµ®ç‚¹æ•°åˆ—è¡¨

3. **æ•°æ®è´¨é‡**ï¼š
   - âœ… é¢‘ç‡èŒƒå›´ï¼š20-20000 Hz
   - âœ… æ•°æ®ç‚¹æ•°ï¼š3000ï¼ˆå›ºå®šï¼‰
   - âœ… æ ¼å¼æ ‡å‡†ï¼šç¬¦åˆJSONè§„èŒƒ

---

**éªŒè¯è„šæœ¬**: `check_json_format.py`  
**æµ‹è¯•è„šæœ¬**: `test_convert_samples.py`
